<!DOCTYPE html>
<html>
<head>
 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/3.4.0/css/swiper.min.css">
 <script src="https://code.jquery.com/jquery.min.js"></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/3.4.0/js/swiper.jquery.min.js"></script>
 <meta charset="utf-8">
 <meta name="viewport" content="width=device-width">
 <meta name="description" content="Snapshots of the Left, Right & Center of News">
 <meta property="og:url" content="http://bradoyler.github.io/newsdivide.html"/>
 <meta property="og:title" content="The News Divide"/>
 <meta property="og:description" content="Snapshots of the Left, Right & Center of News"/>
 <meta property="og:image" content="http://s3.amazonaws.com/cdn.newsblock.io/newsmachine/newsdivide_image.jpg"/>
 <meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:site" content="@bradoyler"/>
<meta name="twitter:title" content="The News Divide"/>
<meta name="twitter:description" content="Snapshots of the Left, Right & Center of News"/>
<meta name="twitter:creator" content="@bradoyler"/>
<meta name="twitter:domain" content="bradoyler.github.io"/>
<meta name="twitter:image" content="http://s3.amazonaws.com/cdn.newsblock.io/newsmachine/newsdivide_image.jpg"/>
 <title>The News Divide</title>
</head>
<body>
  <style>
  img {
      max-width: 98%;
      margin-left: 6px;
      box-shadow: 0 0 .7em #999;
      margin-top: 1em;
  }
  .title {
    font-family: monospace;
    font-size: 1.5em;
  }
  </style>
  <div class='container swiper-container'>
    <div class="row swiper-wrapper">
      <div class="left_sites col-sm-4 col-xs-12 swiper-slide">
        <div class="title">LEFT</div>
      </div>
      <div class="center_sites col-sm-4 col-xs-12 swiper-slide">
        <div class="title">CENTER</div>
      </div>
      <div class="right_sites col-sm-4 col-xs-12 swiper-slide">
        <div class="title">RIGHT</div>
      </div>
    </div>
    <div class="">
      Archive
    </div>
    <ul>
      <li><a href="?today">Today</a></li>
      <li><a href="?archive=2016-11-20">2016-11-20</a></li>
      <li><a href="?archive=2016-11-19">2016-11-19</a></li>
      <li><a href="?archive=2016-11-18">2016-11-18</a></li>
      <li><a href="?archive=2016-11-17">2016-11-17</a></li>
    </ul>
  </div>

<script type="text/javascript">
 var isMobile = (function () {
    var check = false;
    if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
      check = true;
    }
    return check;
 }());

 var archiveDate = (function () {
    var slug = 'latest';
    var qry = document.location.search;
    if (qry && qry.indexOf('?archive=') !== -1) {
      // console.log('>> ', qry, qry.indexOf('?archive='));
      slug = qry.split('=')[1];
    }
    return slug;
 }());

 $(function(){
  var baseUrl = 'http://s3.amazonaws.com/cdn.newsblock.io/newsmachine/'+ archiveDate +'/';
  var ajaxOptions = {
      url:'http://s3.amazonaws.com/cdn.newsblock.io/newsmachine/left-right.json',
      success: function (data) {
        data.left_sites.forEach(function(page){
          $('.left_sites').append('<a href="'+page.url+'" target="blank"><img src="'+ baseUrl + page.image +'" /></a>');
        });
        data.center_sites.forEach(function(page){
          $('.center_sites').append('<a href="'+page.url+'" target="blank"><img src="'+ baseUrl + page.image +'" /></a>');
        });
        data.right_sites.forEach(function(page){
          $('.right_sites').append('<a href="'+page.url+'" target="blank"><img src="'+ baseUrl + page.image +'" /></a>');
        });
      },
      error: function (resp, err, msg) {
        console.log('err:', err);
      }
  };

  $.ajax(ajaxOptions);

  var swipeEffect = isMobile ? 'coverflow' : 'slide';

  var swiper = new Swiper('.swiper-container', {
        effect: swipeEffect,
        initialSlide: 1,
        grabCursor: false,
        centeredSlides: true,
        slidesPerView: '3',
        breakpoints: {
            1024: { slidesPerView: 3, spaceBetween: 10},
            768: { slidesPerView: 2, spaceBetween: 10},
            420: { slidesPerView: 1, spaceBetween: 0},
            320: { slidesPerView: 1, spaceBetween: 0}
        },
        coverflow: {
            rotate: 10,
            stretch: 0,
            depth: 10,
            modifier: 1,
            slideShadows : false
        }
  });
 });
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-372716-21', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
